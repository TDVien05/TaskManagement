<Window x:Class="Tomany.TaskManagement.TaskBoardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Tomany.TaskManagement"
        mc:Ignorable="d"
        Title="Task Board - View All Tasks" Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#0f7f3c" Offset="0"/>
                <GradientStop Color="#12b76a" Offset="0.35"/>
                <GradientStop Color="#f7fff9" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="100"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#0f7f3c">
            <Grid Margin="20,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="Task Board" FontSize="24" FontWeight="Bold" Foreground="White"/>
                    <TextBlock x:Name="ProjectNameTextBlock" Text="Select a project" FontSize="14" Foreground="#e6f6ec"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <ComboBox x:Name="ProjectComboBox" Width="250" Height="35" Margin="0,0,15,0"
                              SelectionChanged="ProjectComboBox_SelectionChanged"
                              DisplayMemberPath="ProjectName"
                              SelectedValuePath="ProjectId"/>
                    <Button x:Name="CreateTaskButton" Content="Create Task" Width="120" Height="35" Margin="0,0,15,0"
                            Background="#16a34a" Foreground="White" Click="CreateTaskButton_Click"/>
                    <Button x:Name="BackButton" Content="Back" Width="80" Height="35"
                            Background="#16a34a" Foreground="White" Click="BackButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Filter Panel -->
        <Border Grid.Row="1" Background="White" Padding="20,15" Margin="20,0,20,0"
                BorderBrush="#d9f3e4" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Filter by:" VerticalAlignment="Center" 
                           FontWeight="SemiBold" Foreground="#0f7f3c" Margin="0,0,10,0"/>
                
                <ComboBox x:Name="StatusFilterComboBox" Grid.Column="1" Height="32" Margin="0,0,15,0"
                          SelectionChanged="FilterComboBox_SelectionChanged">
                    <ComboBoxItem Content="All Status" IsSelected="True"/>
                    <ComboBoxItem Content="Pending"/>
                    <ComboBoxItem Content="In Progress"/>
                    <ComboBoxItem Content="Review"/>
                    <ComboBoxItem Content="Completed"/>
                </ComboBox>

                <TextBlock Grid.Column="2" Text="Deadline:" VerticalAlignment="Center" 
                           FontWeight="SemiBold" Foreground="#0f7f3c" Margin="0,0,10,0"/>
                
                <DatePicker x:Name="DeadlineFilterDatePicker" Grid.Column="3" Height="32" Margin="0,0,15,0"
                            SelectedDateChanged="DeadlineFilterDatePicker_SelectedDateChanged"/>

                <Button Grid.Column="4" Content="Clear Filters" Width="120" Height="32" Margin="0,0,15,0"
                        Background="#f3fff8" BorderBrush="#9bd7b3" Foreground="#0f7f3c"
                        Click="ClearFiltersButton_Click"/>

                <TextBlock Grid.Column="6" x:Name="TaskCountTextBlock" Text="0 tasks" 
                           VerticalAlignment="Center" HorizontalAlignment="Right"
                           FontSize="14" Foreground="#52725b" Margin="0,0,15,0"/>

                <Button Grid.Column="7" Content="Refresh" Width="100" Height="32"
                        Background="#0f7f3c" Foreground="White"
                        Click="RefreshButton_Click"/>
            </Grid>
        </Border>

        <!-- Task Board -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto" Margin="20,15,20,20">
            <Grid x:Name="TaskBoardGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Pending Column -->
                <Border Grid.Column="0" Background="White" CornerRadius="8" Margin="0,0,10,0"
                        BorderBrush="#d9f3e4" BorderThickness="1">
                    <Border.Effect>
                        <DropShadowEffect Color="#33000000" BlurRadius="8" ShadowDepth="2" Opacity="0.6"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" Background="#fef3c7" Padding="15" CornerRadius="8,8,0,0">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="â³ " FontSize="18" VerticalAlignment="Center"/>
                                    <TextBlock Text="Pending" FontSize="18" FontWeight="Bold" Foreground="#92400e"/>
                                </StackPanel>
                                <TextBlock x:Name="PendingCountTextBlock" Text="0 tasks" FontSize="12" Foreground="#78350f" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl x:Name="PendingTasksItemsControl" Margin="10">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#fef3c7" CornerRadius="6" Padding="12" Margin="0,0,0,10"
                                                BorderBrush="#fde68a" BorderThickness="1" Cursor="Hand"
                                                MouseDown="TaskCard_MouseDown">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding TaskName}" FontWeight="Bold" FontSize="14" 
                                                               Foreground="#78350f" TextWrapping="Wrap" VerticalAlignment="Center" Width="*"/>
                                                    <Border Background="#fbbf24" CornerRadius="10" Padding="4,2" Margin="5,0,0,0">
                                                        <TextBlock Text="{Binding Priority}" FontSize="9" FontWeight="Bold" 
                                                                   Foreground="#78350f"/>
                                                    </Border>
                                                </StackPanel>
                                                <TextBlock Text="{Binding TaskDescription}" FontSize="12" 
                                                           Foreground="#92400e" TextWrapping="Wrap" 
                                                           MaxHeight="60" TextTrimming="CharacterEllipsis" Margin="0,0,0,8"/>
                                                <Separator Margin="0,0,0,8"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ‘¤ " FontSize="11" Foreground="#92400e"/>
                                                    <TextBlock Text="{Binding AssigneeName}" FontSize="11" Foreground="#78350f"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ“… " FontSize="11" Foreground="#92400e"/>
                                                    <TextBlock Text="{Binding FormattedDueDate}" FontSize="11" Foreground="#78350f"/>
                                                </StackPanel>
                                                <Separator Margin="0,5,0,5"/>
                                                <StackPanel>
                                                    <TextBlock Text="Status:" FontSize="11" Foreground="#92400e" FontWeight="SemiBold" Margin="0,0,0,3"/>
                                                    <ComboBox x:Name="StatusComboBox" Height="28" FontSize="11"
                                                              SelectedValue="{Binding TaskStatus}"
                                                              SelectedValuePath="Content"
                                                              SelectionChanged="TaskStatusComboBox_SelectionChanged"
                                                              Loaded="StatusComboBox_Loaded"
                                                              Tag="{Binding}">
                                                    </ComboBox>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- In Progress Column -->
                <Border Grid.Column="1" Background="White" CornerRadius="8" Margin="5,0,5,0"
                        BorderBrush="#d9f3e4" BorderThickness="1">
                    <Border.Effect>
                        <DropShadowEffect Color="#33000000" BlurRadius="8" ShadowDepth="2" Opacity="0.6"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" Background="#dbeafe" Padding="15" CornerRadius="8,8,0,0">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ”„ " FontSize="18" VerticalAlignment="Center"/>
                                    <TextBlock Text="In Progress" FontSize="18" FontWeight="Bold" Foreground="#1e40af"/>
                                </StackPanel>
                                <TextBlock x:Name="InProgressCountTextBlock" Text="0 tasks" FontSize="12" Foreground="#1e3a8a" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl x:Name="InProgressTasksItemsControl" Margin="10">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#dbeafe" CornerRadius="6" Padding="12" Margin="0,0,0,10"
                                                BorderBrush="#93c5fd" BorderThickness="1" Cursor="Hand"
                                                MouseDown="TaskCard_MouseDown">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding TaskName}" FontWeight="Bold" FontSize="14" 
                                                               Foreground="#1e3a8a" TextWrapping="Wrap" VerticalAlignment="Center" Width="*"/>
                                                    <Border Background="#60a5fa" CornerRadius="10" Padding="4,2" Margin="5,0,0,0">
                                                        <TextBlock Text="{Binding Priority}" FontSize="9" FontWeight="Bold" 
                                                                   Foreground="#1e3a8a"/>
                                                    </Border>
                                                </StackPanel>
                                                <TextBlock Text="{Binding TaskDescription}" FontSize="12" 
                                                           Foreground="#1e40af" TextWrapping="Wrap" 
                                                           MaxHeight="60" TextTrimming="CharacterEllipsis" Margin="0,0,0,8"/>
                                                <Separator Margin="0,0,0,8"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ‘¤ " FontSize="11" Foreground="#1e40af"/>
                                                    <TextBlock Text="{Binding AssigneeName}" FontSize="11" Foreground="#1e3a8a"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ“… " FontSize="11" Foreground="#1e40af"/>
                                                    <TextBlock Text="{Binding FormattedDueDate}" FontSize="11" Foreground="#1e3a8a"/>
                                                </StackPanel>
                                                <Separator Margin="0,5,0,5"/>
                                                <StackPanel>
                                                    <TextBlock Text="Status:" FontSize="11" Foreground="#1e40af" FontWeight="SemiBold" Margin="0,0,0,3"/>
                                                    <ComboBox x:Name="StatusComboBox" Height="28" FontSize="11"
                                                              SelectedValue="{Binding TaskStatus}"
                                                              SelectedValuePath="Content"
                                                              SelectionChanged="TaskStatusComboBox_SelectionChanged"
                                                              Loaded="StatusComboBox_Loaded"
                                                              Tag="{Binding}">
                                                    </ComboBox>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- Review Column -->
                <Border Grid.Column="2" Background="White" CornerRadius="8" Margin="5,0,5,0"
                        BorderBrush="#d9f3e4" BorderThickness="1">
                    <Border.Effect>
                        <DropShadowEffect Color="#33000000" BlurRadius="8" ShadowDepth="2" Opacity="0.6"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" Background="#fce7f3" Padding="15" CornerRadius="8,8,0,0">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ‘€ " FontSize="18" VerticalAlignment="Center"/>
                                    <TextBlock Text="Review" FontSize="18" FontWeight="Bold" Foreground="#9f1239"/>
                                </StackPanel>
                                <TextBlock x:Name="ReviewCountTextBlock" Text="0 tasks" FontSize="12" Foreground="#831843" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl x:Name="ReviewTasksItemsControl" Margin="10">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#fce7f3" CornerRadius="6" Padding="12" Margin="0,0,0,10"
                                                BorderBrush="#f9a8d4" BorderThickness="1" Cursor="Hand"
                                                MouseDown="TaskCard_MouseDown">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding TaskName}" FontWeight="Bold" FontSize="14" 
                                                               Foreground="#831843" TextWrapping="Wrap" VerticalAlignment="Center" Width="*"/>
                                                    <Border Background="#f472b6" CornerRadius="10" Padding="4,2" Margin="5,0,0,0">
                                                        <TextBlock Text="{Binding Priority}" FontSize="9" FontWeight="Bold" 
                                                                   Foreground="#831843"/>
                                                    </Border>
                                                </StackPanel>
                                                <TextBlock Text="{Binding TaskDescription}" FontSize="12" 
                                                           Foreground="#9f1239" TextWrapping="Wrap" 
                                                           MaxHeight="60" TextTrimming="CharacterEllipsis" Margin="0,0,0,8"/>
                                                <Separator Margin="0,0,0,8"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ‘¤ " FontSize="11" Foreground="#9f1239"/>
                                                    <TextBlock Text="{Binding AssigneeName}" FontSize="11" Foreground="#831843"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ“… " FontSize="11" Foreground="#9f1239"/>
                                                    <TextBlock Text="{Binding FormattedDueDate}" FontSize="11" Foreground="#831843"/>
                                                </StackPanel>
                                                <Separator Margin="0,5,0,5"/>
                                                <StackPanel>
                                                    <TextBlock Text="Status:" FontSize="11" Foreground="#9f1239" FontWeight="SemiBold" Margin="0,0,0,3"/>
                                                    <ComboBox x:Name="StatusComboBox" Height="28" FontSize="11"
                                                              SelectedValue="{Binding TaskStatus}"
                                                              SelectedValuePath="Content"
                                                              SelectionChanged="TaskStatusComboBox_SelectionChanged"
                                                              Loaded="StatusComboBox_Loaded"
                                                              Tag="{Binding}">
                                                    </ComboBox>
                                                </StackPanel>
                                                <Separator Margin="0,8,0,8"/>
                                                <Button x:Name="ApproveButton" Content="âœ“ Approve" 
                                                        Height="32" FontSize="12" FontWeight="SemiBold"
                                                        Background="#16a34a" Foreground="White"
                                                        BorderThickness="0"
                                                        Cursor="Hand"
                                                        Click="ApproveButton_Click"
                                                        Tag="{Binding}"
                                                        Loaded="ApproveButton_Loaded"
                                                        Visibility="Collapsed"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- Completed Column -->
                <Border Grid.Column="3" Background="White" CornerRadius="8" Margin="10,0,0,0"
                        BorderBrush="#d9f3e4" BorderThickness="1">
                    <Border.Effect>
                        <DropShadowEffect Color="#33000000" BlurRadius="8" ShadowDepth="2" Opacity="0.6"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" Background="#d1fae5" Padding="15" CornerRadius="8,8,0,0">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="âœ… " FontSize="18" VerticalAlignment="Center"/>
                                    <TextBlock Text="Completed" FontSize="18" FontWeight="Bold" Foreground="#065f46"/>
                                </StackPanel>
                                <TextBlock x:Name="CompletedCountTextBlock" Text="0 tasks" FontSize="12" Foreground="#064e3b" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl x:Name="CompletedTasksItemsControl" Margin="10">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#d1fae5" CornerRadius="6" Padding="12" Margin="0,0,0,10"
                                                BorderBrush="#6ee7b7" BorderThickness="1" Cursor="Hand"
                                                MouseDown="TaskCard_MouseDown" Opacity="0.85">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding TaskName}" FontWeight="Bold" FontSize="14" 
                                                               Foreground="#064e3b" TextWrapping="Wrap" VerticalAlignment="Center" Width="*"/>
                                                    <Border Background="#34d399" CornerRadius="10" Padding="4,2" Margin="5,0,0,0">
                                                        <TextBlock Text="{Binding Priority}" FontSize="9" FontWeight="Bold" 
                                                                   Foreground="#064e3b"/>
                                                    </Border>
                                                </StackPanel>
                                                <TextBlock Text="{Binding TaskDescription}" FontSize="12" 
                                                           Foreground="#065f46" TextWrapping="Wrap" 
                                                           MaxHeight="60" TextTrimming="CharacterEllipsis" Margin="0,0,0,8"/>
                                                <Separator Margin="0,0,0,8"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ‘¤ " FontSize="11" Foreground="#065f46"/>
                                                    <TextBlock Text="{Binding AssigneeName}" FontSize="11" Foreground="#064e3b"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                                    <TextBlock Text="ðŸ“… " FontSize="11" Foreground="#065f46"/>
                                                    <TextBlock Text="{Binding FormattedDueDate}" FontSize="11" Foreground="#064e3b"/>
                                                </StackPanel>
                                                <Separator Margin="0,5,0,5"/>
                                                <StackPanel>
                                                    <TextBlock Text="Status:" FontSize="11" Foreground="#065f46" FontWeight="SemiBold" Margin="0,0,0,3"/>
                                                    <ComboBox x:Name="StatusComboBox" Height="28" FontSize="11"
                                                              SelectedValue="{Binding TaskStatus}"
                                                              SelectedValuePath="Content"
                                                              SelectionChanged="TaskStatusComboBox_SelectionChanged"
                                                              Loaded="StatusComboBox_Loaded"
                                                              Tag="{Binding}">
                                                    </ComboBox>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>

